<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>3.3 노드 내장 객체 알아보기 | 지식 흡입기</title>
<meta name="description" content="3.3 노드 내장 객체 알아보기">


  <meta name="author" content="유성민">


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="지식 흡입기">

<meta property="og:title" content="3.3 노드 내장 객체 알아보기">
<meta property="og:url" content="https://itsbeenalongday.github.io//3.3-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/">


  <meta property="og:description" content="3.3 노드 내장 객체 알아보기">














  <meta property="article:published_time" content="2021-08-22T00:00:00+09:00">





  

  


<link rel="canonical" href="https://itsbeenalongday.github.io//3.3-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "유성민",
      "url": "https://itsbeenalongday.github.io//"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="지식 흡입기 Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          지식 흡입기
          <span class="site-subtitle">지식 빨이들이기</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/posts/">연도 별</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">카테고리 별</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">태그 별</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">3.3 노드 내장 객체 알아보기</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://itsbeenalongday.github.io//" itemprop="url">유성민</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>가짜 개발자</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">경기도 수원시</span>
        </li>
      

      
        
          
            <li><a href="http://itsbeenalongday.github.io" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/Itsbeenalongday" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://insomenia.com/" rel="nofollow noopener noreferrer me"><i class="fas fa-building" aria-hidden="true"></i><span class="label">Company</span></a></li>
          
        
          
            <li><a href="https://www.ajou.ac.kr/kr/index.do" rel="nofollow noopener noreferrer me"><i class="fas fa-user-graduate" aria-hidden="true"></i><span class="label">University</span></a></li>
          
        
      

      

      
        <li>
          <a href="mailto:mailto:dbtjdals1771@ajou.ac.kr" rel="me" class="u-email">
            <meta itemprop="email" content="mailto:dbtjdals1771@ajou.ac.kr" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">이메일</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="3.3 노드 내장 객체 알아보기">
    <meta itemprop="description" content="3.3 노드 내장 객체 알아보기">
    <meta itemprop="datePublished" content="2021-08-22T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://itsbeenalongday.github.io//3.3-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" class="u-url" itemprop="url">3.3 노드 내장 객체 알아보기
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 분 소요
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h1 id="33-노드-내장-객체-알아보기">3.3 노드 내장 객체 알아보기</h1>

<p>노드에서는 기본적인 내장 객체와 내장 모듈을 제공한다.</p>

<p>따로 설치하지 않아도 가능하고, 브라우저의 window 객체와 유사하다.</p>

<h2 id="331-global">3.3.1) global</h2>

<p>global 객체는 전역 객체로써 브라우저의 window와 비슷하다.</p>

<p>전역 객체이므로 모든 파일에서 접근할 수 있다. 또한, <a href="http://window.open">window.open</a> 메서드를 window를 생략하고 open으로 호출 할 수 있는 것 처럼 global도 생략 가능하다.</p>

<p>이전 절에서 사용했던 require 함수도 global.require에서 global이 생략된 것이다. 콘솔객체도 원래 형태는global.console이다.</p>

<ul>
  <li>노드의 window, document 객체</li>
</ul>

<p>노드에 DOM이나 BOM이 없으므로 window와 document 객체를 사용할 수 없다.</p>

<p>언제 사용하는가?</p>

<p>파일 간에 간단한 데이터를 공유할 때 사용하기도 한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* a.js */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span> <span class="c1">// global 객체의 message를 반환</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* b.js */</span>
<span class="kd">const</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(.</span><span class="o">/</span><span class="nx">a</span><span class="p">);</span>

<span class="nb">global</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">안녕하세요</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// 내용을 b에서 등록</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">A</span><span class="p">());</span>

<span class="o">=&gt;</span> <span class="nx">안녕하세요</span>
</code></pre></div></div>

<ul>
  <li>global 객체의 남용</li>
</ul>

<p>global 객체의 속성에 값을 대입하여 파일 간에 데이터를 공유할 수 있지만, 남용할 우려가 있다.</p>

<p>프로그램의 규모가 커질 수록 어떤 파일에서 global 객체에 값을 대입했는지 찾기 힘들어져 유지 보수에 어려움을 겪게 된다. 다른 파일의 값을 사용하고 싶다면 모듈 형식으로 만들어 명시적으로 사용하는 것이 좋다.</p>

<h2 id="332-console">3.3.2) console</h2>

<p>현재까지 사용했던 console도 노드에서는 window 대신 global 객체 안에 들어 있으며,</p>

<p>브라우저에서의 console과 거의 비슷하다. console 객체는 내용 확인을 위해 사용된다.</p>

<ul>
  <li>console.time(‘시간 측정 시 표출 문구’), console.timeEnd(‘시간 측정 시 표출 문구’) # 시간 측정 시</li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">check time</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// label이 같아야함</span>
<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">100000</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">check time</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// label이 같아야함</span>
</code></pre></div></div>

<ul>
  <li>console.error(‘에러 내용’) # 에러내용 표출</li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">{</span>
	<span class="cm">/* do something */</span>
<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>console.table(collection) # 콜랙션형태를 테이블형태로 보기</li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="p">[</span>
	<span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">},</span>
	<span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">},</span>
	<span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">}</span>
<span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>

<span class="err">┌─────────┬────┬──────┐</span>
<span class="err">│</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="err">│</span> <span class="nx">id</span> <span class="err">│</span> <span class="nx">name</span> <span class="err">│</span>
<span class="err">├─────────┼────┼──────┤</span>
<span class="err">│</span>    <span class="mi">0</span>    <span class="err">│</span> <span class="mi">1</span>  <span class="err">│</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span>  <span class="err">│</span>
<span class="err">│</span>    <span class="mi">1</span>    <span class="err">│</span> <span class="mi">2</span>  <span class="err">│</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span>  <span class="err">│</span>
<span class="err">│</span>    <span class="mi">2</span>    <span class="err">│</span> <span class="mi">3</span>  <span class="err">│</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span>  <span class="err">│</span>
<span class="err">└─────────┴────┴──────┘</span>
</code></pre></div></div>

<ul>
  <li>console.dir(객체, 옵션) # 객체를 정돈된 형태로 보기</li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">userInfo</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">유성민</span><span class="dl">'</span><span class="p">,</span>
	<span class="na">birth</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1996-01-24</span><span class="dl">'</span><span class="p">,</span>
	<span class="na">job</span><span class="p">:</span> <span class="dl">'</span><span class="s1">developer</span><span class="dl">'</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">userInfo</span><span class="p">);</span>

<span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">유성민</span><span class="dl">'</span><span class="p">,</span> <span class="na">birth</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1996-01-24</span><span class="dl">'</span><span class="p">,</span> <span class="na">job</span><span class="p">:</span> <span class="dl">'</span><span class="s1">developer</span><span class="dl">'</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="333-타이머">3.3.3) 타이머</h2>

<p>타이머 기능을 제공하는 함수로는 setTimeout, setInterval, setImmediate가 있고, window대신 global에 들어있다.</p>

<ul>
  <li>setTimeout(calback, msec);
    <ul>
      <li>주어진 밀리초(1000분의 1초) 이후에 콜백 함수를 실행합니다.</li>
    </ul>
  </li>
  <li>setInterval(callback, msec);
    <ul>
      <li>주어진 밀리초마다 콜백 함수를 반복 실행</li>
    </ul>
  </li>
  <li>setImmediate(callback);
    <ul>
      <li>콜백 함수를 즉시 실행</li>
    </ul>
  </li>
</ul>

<p>이 타이머 함수들은 모두 아이디를 반환하는데, 이것을 이용항 타이머를 취소할 수 있다.</p>

<ul>
  <li>clearTimeout(id);
    <ul>
      <li>setTimeout을 취소</li>
    </ul>
  </li>
  <li>clearInterval(id);
    <ul>
      <li>setInterval을 취소</li>
    </ul>
  </li>
  <li>clearImmediate(id);
    <ul>
      <li>setImmediate를 취소</li>
    </ul>
  </li>
</ul>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">timeOut</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">1초 뒤에 실행</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">timeOut</span><span class="p">);</span>

<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeOut</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>setImmediate(callback)과 setTimeot(callback, 0)의 차이</li>
</ul>

<p>setImmediate와 setTimeout에 담긴 콜백함수는 이벤트 루프를 거친 뒤 즉시 실행되는데,  특수한 경우setImmediate는 setTimeout보다 먼저 실행된다. 이를 테면 파일 시스템 접근, 네트워킹 IO 작업의 콜백 함수 안에서 타이머를 호출하는 경우이다. 그러나 항상 setImmediate가 setTimeout보다 선행되는 것은 아니다. 혼란의 여지가 없도록 바로 호출해야 하는 경우라면 setImmediate를 사용하자</p>

<h2 id="334-__filename-__dirname">3.3.4) __filename, __dirname</h2>

<p>모듈 시스템으로 복잡한 노드 위에서 돌아가는 프로그램은 때때로 현재 파일 경로나 파일명을 알아야하는데, 노드는 __filename과 __dirname이라는 키워드로 경로 정보를 제공한다. 파일에 __filename과 __dirname을 넣어두면 실행 시 현 파일명과 현 파일 경로로 바뀐다. 즉, 다이나믹하게 변경되는 변수라는 것이다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* /usr/workspace/front/path.js 에서 실행 */</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">__filename</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">);</span>

<span class="sr">/usr/</span><span class="nx">workspace</span><span class="o">/</span><span class="nx">front</span><span class="o">/</span><span class="nx">path</span><span class="p">.</span><span class="nx">js</span>
<span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">workspace</span><span class="o">/</span><span class="nx">front</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* /usr/workspace/backend/path.js 에서 실행 */</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">__filename</span><span class="p">);</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">);</span><span class="sr">/usr/</span><span class="nx">workspace</span><span class="o">/</span><span class="nx">backend</span><span class="o">/</span><span class="nx">path</span><span class="p">.</span><span class="nx">js</span><span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">workspace</span><span class="o">/</span><span class="nx">backend</span>
</code></pre></div></div>

<p>경로 separator 문제가 생기는 경우가 빈번하여 주로 path 모듈과 함께 사용한다.</p>

<h2 id="335-module-exports-require">3.3.5) module, exports, require</h2>

<p>모듈을 만들 때 module.exports를 사용했지만, module객체 말고도 exports 객체로도 모듈을 생성할 수 있다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* var.js */</span><span class="nx">exports</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="nx">exports</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* func.js */</span><span class="kd">const</span> <span class="nx">vars</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./var</span><span class="dl">'</span><span class="p">);</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">vars</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span><span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div>

<p>module.exports로 일괄 대입하는 대신, 각 변수를 exports에 넣은 것이다.</p>

<p>객체 초기화할 때랑 같은 경우라 보면 된다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>	<span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>	<span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span><span class="o">==</span> <span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="nx">o</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</code></pre></div></div>

<p>이것이 동작하는 이유는 module.exports와 exports가 같은 객체를 참조하기 때문이다.</p>

<p>즉, module.exports === exports ⇒ true이다.</p>

<p><img src="/assets/images/node.js/3.3.1.jpg" alt="3.3.1" /></p>

<p>❗주의</p>

<p>exports 객체를 사용할 때는 module.exports와의 참조 관계가 깨지지 않도록 주의해야 한다.</p>

<p>module.exports에는 어떤 값이든 대입해도 되지만, exports에는 반드시 객체처럼 키와 밸류를 대입해야 한다.</p>

<p>exports에 다른 값을 대입하면 객체의 참조관계가 끊겨 더이상 모듈로 기능하지 않는다. 이를 테면 exports foo = addTwoNum 이런식으로 함수를 대입하면 더이상 모듈로 못쓴다는 얘기다.</p>

<p>export와 module.exports에는 레퍼런스가 있으므로 한 모듈에 exports 객체와 module.exports를 동시에 사용하지 않는 것이 좋다.</p>

<p>❗this</p>

<p>node에서 최상위 scope의 this는 module.exports를 가리키고 함수 선언 문 내부의 this는 global 객체를 가리킨다.</p>

<ul>
  <li>require</li>
</ul>

<p>require은 모듈을 불러오는 역할을 한다. require는 함수이고, 함수는 객체이므로 require는 객체로서 몇 가지 속성을 갖는다. 그 중에서 cache와 main이 있다.</p>

<p>require.cache 객체에는 파일 이름이 key, 각 파일의 모듈 객체가 value로 들어있다. 한 번 require한 파일은 require.cache에 저장되므로, 재사용시에, cache을 이용하여 재사용 한다.</p>

<p>속성들을 자세히 보면, module.export(exports), loaded, parent, children 모듈 관계를 찾아볼 수 있다.</p>

<p>require.main은 노드 실행 시 첫 모듈을 가리킨다. 즉 실행한 파일이다. 현재 파일이 첫 모듈인지 알아보려면 <code class="language-plaintext highlighter-rouge">require.main === module</code>을 해보면 되겠다. 첫 모듈의 파일이름은 <code class="language-plaintext highlighter-rouge">require.main.filename</code> 으로 확인 해보자.</p>

<ul>
  <li>순환 참조</li>
</ul>

<p>모듈을 사용할 때 주의점으로 순환 참조가 있다. 순환 참조는 서로 다른 두 모듈이 서로를 require하여 참조하는 경우를 일컫는다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// module1.jsconst module2 = require('./module2');console.log('require module 2', module2);module.exports = () =&gt; {	console.log('module2', module2);}</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// module2.jsconst module1 = require('./module1');console.log('require module 1', module1);module.exports = () =&gt; {	console.log('module1', module1);}</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">module1</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./module1</span><span class="dl">'</span><span class="p">);</span><span class="kd">const</span> <span class="nx">module2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./module2</span><span class="dl">'</span><span class="p">);</span><span class="nx">module1</span><span class="p">();</span><span class="nx">module2</span><span class="p">();</span>
</code></pre></div></div>

<p>코드의 실행 순서에 따라 module1이 먼저 호출되는데, module1이 빈 객체로 리턴된다. 이렇게 순환 참조가 있을 경우는 제일 나중에 실행된 순환 참조 사이클에 있는 모듈만 제대로 나오고, 그 이전 모듈들은 빈 객체로 리턴된다. 주의할 점이라는 것은 에러가 발생하지않고, 빈 객체로 리턴된다는 것이다.</p>

<h2 id="336-process">3.3.6) process</h2>

<p>process 객체는 현재 실행되고 있는 노드 프로세스에 대한 정보를 담고있다. 그래서 pid, uptime, platform 등등 다양한 시스템 관련 정보를 참조할 수 있는데, 이 정보들은 일반적으로 운영체제난 실행 환경별로 다른 동작을 시키고 싶을 때 사용한다. process.env, process.nextTick, process.exit()이 특히 중요하다.</p>

<p>(1) process.env</p>

<p>시스템의 환경 변수인데, 이것은 노드에 직접적 영향을 미치기도 한다. 대표적인 것으로 UV_TREADPOOL_SIZE, NODE_OPTIONS가 있다. 첫 번째로 NODE_OPTIONS는 노드를 실행할 때 옵션들을 입력받는 환경 변수이다. —max-old-space-size=4096는 노드의 메모리의 최대 사용량을 4GB로 설정하는 것이다.  UV_TREADPOOL_SIZE의 경우는 노드에서 기본적으로 사용하는 스레드풀의 스레드 개수를 조절할 수 있게 한다.</p>

<p>시스템의 환경 변수 외에도 임의로 환경 변수를 저장할 수 있다. process.env는 서비스의 중요한 키들을 저장하는 공간으로도 사용된다. 서버나 데이터베이스의 비밀번호와 각종 API KEY들은 코드와 분리 되있어야 하는데, 혹여나 해킹으로 인해 코드가 유출될 수 있기 때문이다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">cosnt</span> <span class="nx">kakaoAPIKey</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KAKAO_API_KEY</span>
</code></pre></div></div>

<p>이런식으로 사용한다.  env에 값을 넣는 방법은 os마다 다르나 한 번에 모든 운영체제에 동일하게 넣을 수 있는 방법이 있는데 이것은 dotenv를 이용하는 것이다.</p>

<p>(2) process.nextTick 콜백</p>

<p>이것은 이벤트 루프의 스케줄링 상에서 최우선 순위를 가지게 만든다는 것이다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">setImmediate</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">즉시</span><span class="dl">'</span><span class="p">));</span><span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">next tick</span><span class="dl">'</span><span class="p">));</span><span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeout 0</span><span class="dl">'</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span><span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">promise</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">실행</span> <span class="nx">순서1</span><span class="p">.</span> <span class="nx">next</span> <span class="nx">tick2</span><span class="p">.</span> <span class="nx">promise3</span><span class="p">.</span> <span class="nx">timeout4</span><span class="p">.</span> <span class="nx">immediate</span> 
</code></pre></div></div>

<p>resolve된 프로미스도 nextTick처럼 다른 콜백들보다 우선권을 갖는다. 그래서 nextTick, resolved promise를 마이크로 태스크라고 따로 구분짓는다.</p>

<p>우선권의 이점때문에 비동기 처리를 할 때 setImmediate보다 process.nextTick을 더 선호하는 개발자들도 있지만, 이로 인해 우선순위가 낮은 콜백들의 starvation이 발생할 수 있으니 주의하자.</p>

<p><img src="/assets/images/node.js/3.3.2.png" alt="3.3.2" /></p>

<p>(3) process.exit(종료 코드)</p>

<p>실행 중인 노드 프로세스를 종료하는 역할을 한다. 서버 환경에서 이 함수를 사용하면 서버가 아예 멈춰버리므로 주의해서 사용해야 한다. 일반적으로 서버와 독립적인 프로그램에서 수동으로 노드를 종료시키기 위해 사용한다.</p>

<p>종료 코드로는 0과 1이 있는데 0은 정상 종료, 1은 에러로 인한 비정상 종료를 의미하기에 상황에 따라 적절한 코드를 주면 되겠다.</p>

<p><strong>(Node.js 교과서 개정 2판 - 길벗, 2021)을 학습하고 개인 학습용으로 정리한 내용입니다.</strong></p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time class="dt-published" datetime="2021-08-22T00:00:00+09:00">August 22, 2021</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=3.3+%EB%85%B8%EB%93%9C+%EB%82%B4%EC%9E%A5+%EA%B0%9D%EC%B2%B4+%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0%20https%3A%2F%2Fitsbeenalongday.github.io%2F%2F3.3-%25EB%2585%25B8%25EB%2593%259C-%25EB%2582%25B4%25EC%259E%25A5-%25EA%25B0%259D%25EC%25B2%25B4-%25EC%2595%258C%25EC%2595%2584%25EB%25B3%25B4%25EA%25B8%25B0%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fitsbeenalongday.github.io%2F%2F3.3-%25EB%2585%25B8%25EB%2593%259C-%25EB%2582%25B4%25EC%259E%25A5-%25EA%25B0%259D%25EC%25B2%25B4-%25EC%2595%258C%25EC%2595%2584%25EB%25B3%25B4%25EA%25B8%25B0%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fitsbeenalongday.github.io%2F%2F3.3-%25EB%2585%25B8%25EB%2593%259C-%25EB%2582%25B4%25EC%259E%25A5-%25EA%25B0%259D%25EC%25B2%25B4-%25EC%2595%258C%25EC%2595%2584%25EB%25B3%25B4%25EA%25B8%25B0%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/3.2-%EB%AA%A8%EB%93%88%EB%A1%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="pagination--pager" title="3.2 모듈로 만들기
">이전</a>
    
    
      <a href="/3.4-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/" class="pagination--pager" title="3.4 노드 내장 모듈 사용하기
">다음</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">연관</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/Jekyll-%EB%B8%94%EB%A1%9C%EA%B7%B8%EC%97%90-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/" rel="permalink">Jekyll 블로그에 비밀번호 설정하기
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">```bash
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/node.js/3.4-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/" rel="permalink">3.4 노드 내장 모듈 사용하기
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/node.js/3.3-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/" rel="permalink">3.3 노드 내장 객체 알아보기
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/node.js/3.2-%EB%AA%A8%EB%93%88%EB%A1%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0/" rel="permalink">3.2 모듈로 만들기
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/Itsbeenalongday?tab=repositories" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 유성민. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://itsbeenalongday.github.io//3.3-%EB%85%B8%EB%93%9C-%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/3.3 노드 내장 객체 알아보기"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://itsbeenalongday.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
